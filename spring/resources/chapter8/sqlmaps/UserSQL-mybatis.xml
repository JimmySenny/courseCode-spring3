<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
     "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="UserSQL">
    
    <sql id="createTable">
    <!--id自增主键从0开始 -->
    <![CDATA[
        create memory table test(
            id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  
            name varchar(100))
    ]]>
    </sql>
    <sql id="dropTable">
    <![CDATA[
        drop table test
    ]]>
    </sql>
    
    <insert id="insert" parameterType="cn.javass.spring.chapter7.UserModel">
    <![CDATA[
        insert into
        test(name)
        values (#{myName})
    ]]>
        <selectKey resultType="int" keyProperty="id" order="AFTER">
            <!-- 获取hsqldb插入的主键 -->
            call identity();
            <!-- mysql使用select last_insert_id();获取插入的主键 -->
        </selectKey>
    </insert>
    <select id="countAll" resultType="java.lang.Integer">
    <![CDATA[ select count(*) from test ]]>    
    </select>
</mapper>
